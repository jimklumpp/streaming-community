<!DOCTYPE HTML>
<html>
<head>
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript">
var contextPath = "/api/1.0";
	 
var ws;
	 
function connect()
{
   var address = $('#txtAddress').val();
   ws = new WebSocket(address);
   ws.onopen = function()
   {
		$('#btnDisconnect').attr('value', 'Disconnect');
		$('#console').prepend("Connected<br/>");
   };
   ws.onmessage = function (evt) 
   { 
        var received_msg = evt.data;
		$('#console').prepend(received_msg + "<br/>");
   };
   ws.onclose = function()
   {
		$('#btnDisconnect').attr('value', 'Connect');
		$('#console').prepend("Connection closed<br/>");
   };
}

$(function() {
  "use strict";
  
  if ("WebSocket" in window)
  {
	 $('#btnSend').on('click', function()
	 {
		ws.send($('#txtInput').val());
	 });
	 $('#btnDisconnect').on('click', function()
	 {
		if ($('#btnDisconnect').val() == 'Disconnect')
		{
			$('#console').prepend("Requesting disconnect<br/>");
			ws.close(1000, "I'm done");
		}
		else
			connect();
	 });
  }
  else
  {
     alert("WebSocket NOT supported by your Browser!");
  }
});
</script>
</head>
<body>
<input type="text" id="txtAddress" value="ws://localhost:8080/api/1.0" size="100" /><br/>
<input type="text" id="txtInput" value="Hello world!" size="100" />
<input type="button" value="Send" id="btnSend" value="Send" /><input type="button" value="Connect" id="btnDisconnect" />
<div id="console"></div>
</body>
</html>