<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<modify version="10.5.0-SNAPSHOT_a8f4a008b96ea7ff9200c11cd2c5388579e1621f">
    <add>
        <gui.metadata>
            <property name="description" value="this module will create a new order every time the metronome fires (parameterized) or can be manually triggered"/>
        </gui.metadata>
        <type-metadata>
            <param name="type" value="module"/>
            <param name="fully-qualified-name" value="com.tibco.sb.compexch.fix_venuesimulator.test.CreateClientOrder"/>
        </type-metadata>
        <memory-model-settings/>
        <import from="com.tibco.sb.compexch.fix_venuesimulator.reference.FIXdefs"/>
        <parameter-definitions>
            <parameter default="5" name="NewOrderRate"/>
            <parameter default="'1'" name="TimeInForce"/>
        </parameter-definitions>
        <dynamic-variables/>
        <stream name="Commands" schema="FIXCommand">
            <property name="description" value="This is used to send commands to this FIX adapter such as Logon, Logoff, Reset, etc."/>
            <param name="gui:x" value="-292"/>
            <param name="gui:y" value="393"/>
            <param name="gui:width" value="70"/>
        </stream>
        <stream name="OneNewOrder">
            <schema>
                <field name="TimeInForce" type="string"/>
                <field name="Symbol" type="string"/>
                <field name="SenderCompID" type="string"/>
            </schema>
            <param name="gui:x" value="-210"/>
            <param name="gui:y" value="-92"/>
            <param name="gui:width" value="70"/>
        </stream>
        <stream name="ReplaceThenCancel">
            <schema>
                <field name="go" type="string"/>
            </schema>
            <param name="gui:x" value="-465"/>
            <param name="gui:y" value="113"/>
            <param name="gui:width" value="70"/>
        </stream>
        <box name="FIXClientInput_1" type="inputadapter">
            <property name="description" value="This adapter receives FIX messages sent by FIXOutput_2 and routes them to the application. It may also receive commands from the application via its input port."/>
            <input port="1" stream="Commands"/>
            <output port="1" stream="AppMsgFromFIXAdapter_2"/>
            <output port="2" stream="ExecutionReportMsgFromFIXAdapter_2"/>
            <output port="3" stream="AdminMsgFromFIXAdapter_2"/>
            <param name="start:state" value="true"/>
            <param name="javaclass" value="com.streambase.sb.adapter.fix.input.FIXInput"/>
            <param name="appMessageSchema0" value="FIXMessages"/>
            <param name="appMessageSchema1" value="FIX_4_2_MsgType_8_ExecutionReport"/>
            <param name="appMessageSchema2" value="FIX_4_2_MsgType_8_ExecutionReport"/>
            <param name="appMessageSchema3" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#13;&#10;&lt;schema name=&quot;schema:FIXClientInput_1&quot;/&gt;&#13;&#10;"/>
            <param name="appMessageSchema4" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#13;&#10;&lt;schema name=&quot;schema:FIXClientInput_1&quot;/&gt;&#13;&#10;"/>
            <param name="appMessageSchema5" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#13;&#10;&lt;schema name=&quot;schema:FIXClientInput_1&quot;/&gt;&#13;&#10;"/>
            <param name="appMessageSchema6" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#13;&#10;&lt;schema name=&quot;schema:FIXClientInput_1&quot;/&gt;&#13;&#10;"/>
            <param name="appMessageSchema7" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#13;&#10;&lt;schema name=&quot;schema:FIXClientInput_1&quot;/&gt;&#13;&#10;"/>
            <param name="appMessageSchema8" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#13;&#10;&lt;schema name=&quot;schema:FIXClientInput_1&quot;/&gt;&#13;&#10;"/>
            <param name="appMessageSchema9" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#13;&#10;&lt;schema name=&quot;schema:FIXClientInput_1&quot;/&gt;&#13;&#10;"/>
            <param name="fieldNameMapFile" value=""/>
            <param name="fixAdminMessageInterceptor" value=""/>
            <param name="fixConfigFile" value=""/>
            <param name="fixEngine" value="QuickFIX/J"/>
            <param name="incomingFilter" value=""/>
            <param name="incomingFilterType" value="Include"/>
            <param name="isLinkedToAdapter" value="true"/>
            <param name="isLoggingIncomingMessages" value="false"/>
            <param name="isLoggingOutgoingMessages" value="false"/>
            <param name="isReportingProfilingData" value="false"/>
            <param name="linkedAdapter" value="FIXClientOut_1"/>
            <param name="logLevel" value="INFO"/>
            <param name="logonAtStartup" value="true"/>
            <param name="messagePortRoutings.0" value="*"/>
            <param name="messagePortRoutings.1" value="8"/>
            <param name="outgoingFilter" value=""/>
            <param name="outgoingFilterType" value="Include"/>
            <param name="profilingDataReportingInterval" value="10000"/>
            <param name="useAdminPort" value="true"/>
            <param name="useCommandInputPort" value="true"/>
            <param name="useSenderLocationIDToNameSession" value="false"/>
            <param name="useSenderSubIDToNameSession" value="false"/>
            <param name="useTargetLocationIDToNameSession" value="false"/>
            <param name="useTargetSubIDToNameSession" value="false"/>
            <param name="gui:x" value="-166"/>
            <param name="gui:y" value="389"/>
            <param name="gui:width" value="70"/>
        </box>
        <box name="NextClOrdID" type="seqnum">
            <property name="description" value="Adds a ClOrdID field to the tuple which contains a unique ID for the FIX field of the same name."/>
            <input port="1" stream="OneNewOrder"/>
            <output port="1" stream="out:NextClOrdID_1"/>
            <param name="output-field" value="ClOrdID"/>
            <param name="sequence-id" value="seq_ClOrdId"/>
            <param name="update-expression" value="seq_ClOrdId + 1"/>
            <param name="gui:x" value="-61"/>
            <param name="gui:y" value="-101"/>
            <param name="gui:width" value="70"/>
        </box>
        <box name="Split1" type="split">
            <input port="1" stream="ReplaceThenCancel"/>
            <output port="1" stream="out:Split1_1"/>
            <output port="2" stream="out:Split1_2"/>
            <param name="output-count" value="2"/>
            <param name="gui:x" value="-322"/>
            <param name="gui:y" value="109"/>
            <param name="gui:width" value="70"/>
        </box>
        <output-stream name="AdminMsgFromFIXAdapter_2">
            <property name="description" value="This receives admin messages sent from FIXOutput_2."/>
            <param name="gui:x" value="-27"/>
            <param name="gui:y" value="452"/>
            <param name="gui:width" value="70"/>
        </output-stream>
        <output-stream name="AppMsgFromFIXAdapter_2">
            <property name="description" value="This stream receives all incoming FIX app messages from FIXOutput_2 that are not of type 8 (type 8 messages are routed to a different port -- see FIXInput_1's 'Port Management' property tab)."/>
            <param name="gui:x" value="-29"/>
            <param name="gui:y" value="335"/>
            <param name="gui:width" value="70"/>
        </output-stream>
        <output-stream name="ExecutionReportMsgFromFIXAdapter_2">
            <property name="description" value="This stream receives incoming FIX Execution Report (type 8)  messages from FIXAdapter2.&#13;&#10;&#13;&#10;Note that while technically Execution Report messages are admin messages, they are so useful to application logic that in addition to being emitted on the Admin Message port they are also emitted as an App-level message -- this is why we can route it to this app-level port."/>
            <param name="gui:x" value="94"/>
            <param name="gui:y" value="393"/>
            <param name="gui:width" value="70"/>
        </output-stream>
        <box name="CreateNewOrderSingle" type="map">
            <property name="description" value="Creates a tuple that will result in a New Order Single (MsgType='D') FIX message to be sent by the FIX adapter.&#13;&#10;&#13;&#10;Note how the NoTradingSessions repeating group is handled via the use of a list of NoTradingSessionsFields tuples (the fields of which make up the repeating fields in the group)."/>
            <input port="1" stream="out:NextClOrdID_1"/>
            <output port="1" stream="out:CreateNewOrderSingle_1"/>
            <target-list>
                <item name="input" selection="none"/>
                <expressions>
                    <include field="BeginString">"FIX.4.2"</include>
                    <include field="MsgType">"D"</include>
                    <include field="SenderCompID">"CLIENT1"</include>
                    <include field="TargetCompID">coalesce( input1.SenderCompID,"VENUE1")</include>
                    <include field="ClOrdID">int(ClOrdID)</include>
                    <include field="OrderQty">1000</include>
                    <include field="Symbol">coalesce(input1.Symbol,"IBM")</include>
                    <include field="Price">100.0</include>
                    <include field="Side">'1'</include>
                    <include field="OrdType">'1' -- Limit</include>
                    <include field="HandlInst">'1'</include>
                    <include field="TransactTime">strftime("%Y%m%d-%H:%M:%S", now())</include>
                    <include field="NoTradingSessions">list(FIX_4_2_NoTradingSessionsFields_Repeating_Group("PRE-OPEN"), FIX_4_2_NoTradingSessionsFields_Repeating_Group("AFTER-HOURS"))</include>
                    <include field="TimeInForce">input1.TimeInForce</include>
                </expressions>
            </target-list>
            <param name="gui:x" value="67"/>
            <param name="gui:y" value="-101"/>
            <param name="gui:width" value="70"/>
        </box>
        <box name="NextClOrdIDCopy" type="seqnum">
            <property name="description" value="Adds a ClOrdID field to the tuple which contains a unique ID for the FIX field of the same name."/>
            <input port="1" stream="out:Split1_1"/>
            <output port="1" stream="out:NextClOrdIDCopy_1"/>
            <param name="output-field" value="ClOrdID"/>
            <param name="sequence-id" value="seq_ClOrdId"/>
            <param name="update-expression" value="seq_ClOrdId + 1"/>
            <param name="gui:x" value="-103"/>
            <param name="gui:y" value="65"/>
            <param name="gui:width" value="70"/>
        </box>
        <box name="NextClOrdIDCopy2" type="seqnum">
            <property name="description" value="Adds a ClOrdID field to the tuple which contains a unique ID for the FIX field of the same name."/>
            <input port="1" stream="out:Split1_2"/>
            <output port="1" stream="out:NextClOrdIDCopy2_1"/>
            <param name="output-field" value="ClOrdID"/>
            <param name="sequence-id" value="seq_ClOrdId"/>
            <param name="update-expression" value="seq_ClOrdId + 1"/>
            <param name="gui:x" value="-106"/>
            <param name="gui:y" value="160"/>
            <param name="gui:width" value="70"/>
        </box>
        <box name="CreateNewOrderSingleCopy" type="map">
            <property name="description" value="Creates a tuple that will result in a New Order Single (MsgType='D') FIX message to be sent by the FIX adapter.&#13;&#10;&#13;&#10;Note how the NoTradingSessions repeating group is handled via the use of a list of NoTradingSessionsFields tuples (the fields of which make up the repeating fields in the group)."/>
            <input port="1" stream="out:NextClOrdIDCopy_1"/>
            <output port="1" stream="out:CreateNewOrderSingleCopy_1"/>
            <target-list>
                <item name="input" selection="none"/>
                <expressions>
                    <include field="BeginString">"FIX.4.2"</include>
                    <include field="MsgType">"G"</include>
                    <include field="SenderCompID">"CLIENT1"</include>
                    <include field="TargetCompID">"VENUE1"</include>
                    <include field="ClOrdID">int(ClOrdID)</include>
                    <include field="OrderQty">20000</include>
                    <include field="Symbol">'IBM'</include>
                    <include field="Price">100.0</include>
                    <include field="Side">'1'</include>
                    <include field="OrdType">'1' -- Limit</include>
                    <include field="HandlInst">'1'</include>
                    <include field="TransactTime">strftime("%Y%m%d-%H:%M:%S", now())</include>
                    <include field="NoTradingSessions">list(FIX_4_2_NoTradingSessionsFields_Repeating_Group("PRE-OPEN"), FIX_4_2_NoTradingSessionsFields_Repeating_Group("AFTER-HOURS"))</include>
                    <include field="TimeInForce">'0'</include>
                    <include field="OrigClOrdID">int(ClOrdID-1)</include>
                    <include field="sleepTime">seconds(2)</include>
                </expressions>
            </target-list>
            <param name="gui:x" value="25"/>
            <param name="gui:y" value="65"/>
            <param name="gui:width" value="70"/>
        </box>
        <box name="CreateNewOrderSingleCopy2" type="map">
            <property name="description" value="Creates a tuple that will result in a New Order Single (MsgType='D') FIX message to be sent by the FIX adapter.&#13;&#10;&#13;&#10;Note how the NoTradingSessions repeating group is handled via the use of a list of NoTradingSessionsFields tuples (the fields of which make up the repeating fields in the group)."/>
            <input port="1" stream="out:NextClOrdIDCopy2_1"/>
            <output port="1" stream="out:CreateNewOrderSingleCopy2_1"/>
            <target-list>
                <item name="input" selection="none"/>
                <expressions>
                    <include field="BeginString">"FIX.4.2"</include>
                    <include field="MsgType">"F"</include>
                    <include field="SenderCompID">"CLIENT1"</include>
                    <include field="TargetCompID">"VENUE1"</include>
                    <include field="ClOrdID">int(ClOrdID)</include>
                    <include field="OrderQty">1000</include>
                    <include field="Symbol">'IBM'</include>
                    <include field="Price">100.0</include>
                    <include field="Side">'1'</include>
                    <include field="OrdType">'1' -- Limit</include>
                    <include field="HandlInst">'1'</include>
                    <include field="TransactTime">strftime("%Y%m%d-%H:%M:%S", now())</include>
                    <include field="NoTradingSessions">list(FIX_4_2_NoTradingSessionsFields_Repeating_Group("PRE-OPEN"), FIX_4_2_NoTradingSessionsFields_Repeating_Group("AFTER-HOURS"))</include>
                    <include field="TimeInForce">'0'</include>
                    <include field="OrigClOrdID">int(ClOrdID-2)</include>
                    <include field="sleepTime">sleep(seconds(2))</include>
                </expressions>
            </target-list>
            <param name="gui:x" value="22"/>
            <param name="gui:y" value="160"/>
            <param name="gui:width" value="70"/>
        </box>
        <box name="Union1" type="union">
            <input port="1" stream="out:CreateNewOrderSingle_1"/>
            <input port="2" stream="out:CreateNewOrderSingleCopy_1"/>
            <input port="3" stream="out:CreateNewOrderSingleCopy2_1"/>
            <output port="1" stream="FIXOutNOS"/>
            <param name="strict" value="false"/>
            <param name="gui:x" value="182"/>
            <param name="gui:y" value="20"/>
            <param name="gui:width" value="70"/>
        </box>
        <output-stream name="FIXOutNOS" scope="public">
            <property name="description" value="This stream receives FIX messages destined to be sent by FIXOutput_1. While not necessary to the logic of the application, it is useful for debugging purposes."/>
            <param name="gui:x" value="298"/>
            <param name="gui:y" value="71"/>
            <param name="gui:width" value="70"/>
        </output-stream>
        <box name="elimFlds" type="map">
            <input port="1" stream="FIXOutNOS"/>
            <output port="1" stream="out:elimFlds_1"/>
            <target-list>
                <item name="input" selection="all">
                    <remove field="sleepTime"/>
                </item>
            </target-list>
            <param name="gui:x" value="235"/>
            <param name="gui:y" value="-37"/>
            <param name="gui:width" value="70"/>
        </box>
        <box name="FIXClientOut_1" type="outputadapter">
            <property name="description" value="This adapter sends FIX messages to FIXInput_2."/>
            <input port="1" stream="out:elimFlds_1"/>
            <param name="start:state" value="true"/>
            <param name="javaclass" value="com.streambase.sb.adapter.fix.output.FIXOutput"/>
            <param name="fieldNameMapFile" value=""/>
            <param name="fixAdminMessageInterceptor" value=""/>
            <param name="fixConfigFile" value="Test/fix-adapter-client.cfg"/>
            <param name="fixEngine" value="QuickFIX/J"/>
            <param name="incomingFilter" value=""/>
            <param name="incomingFilterType" value="Include"/>
            <param name="isLoggingIncomingMessages" value="true"/>
            <param name="isLoggingOutgoingMessages" value="true"/>
            <param name="isReportingProfilingData" value="false"/>
            <param name="logLevel" value="DEBUG"/>
            <param name="logonAtStartup" value="true"/>
            <param name="outgoingFilter" value=""/>
            <param name="outgoingFilterType" value="Include"/>
            <param name="profilingDataReportingInterval" value="10000"/>
            <param name="useSenderLocationIDToNameSession" value="false"/>
            <param name="useSenderSubIDToNameSession" value="false"/>
            <param name="useTargetLocationIDToNameSession" value="false"/>
            <param name="useTargetSubIDToNameSession" value="false"/>
            <param name="gui:x" value="345"/>
            <param name="gui:y" value="-37"/>
            <param name="gui:width" value="70"/>
        </box>
        <gui.note name="See_MetaData_TAB">
            <property name="description" value="metadata tab  explains purpose of this module&#13;&#10;parameters TAB contains default values&#13;&#10;definitions TAB contains schema info"/>
            <param name="gui:x" value="-545"/>
            <param name="gui:y" value="-67"/>
            <param name="gui:width" value="245"/>
            <param name="gui:height" value="81"/>
        </gui.note>
        <gui.group color="128,255,128" name="NewOrderCreate" visual-state="open">
            <member name="OneNewOrder"/>
            <member name="NextClOrdID"/>
            <member name="CreateNewOrderSingle"/>
            <param name="gui:x" value="-232"/>
            <param name="gui:y" value="-141"/>
            <param name="gui:width" value="415"/>
            <param name="gui:height" value="144"/>
        </gui.group>
        <gui.group color="128,128,255" name="ProcessServerMessages_G" visual-state="open">
            <property name="description" value="this will process (sink) ACK and Fills"/>
            <member name="Commands"/>
            <member name="FIXClientInput_1"/>
            <member name="AdminMsgFromFIXAdapter_2"/>
            <member name="AppMsgFromFIXAdapter_2"/>
            <member name="ExecutionReportMsgFromFIXAdapter_2"/>
            <param name="gui:x" value="-307"/>
            <param name="gui:y" value="301"/>
            <param name="gui:width" value="551"/>
            <param name="gui:height" value="241"/>
        </gui.group>
        <gui.group color="255,255,128" name="ReplaceAndCancel_G" visual-state="open">
            <member name="CreateNewOrderSingleCopy"/>
            <member name="NextClOrdIDCopy"/>
            <member name="CreateNewOrderSingleCopy2"/>
            <member name="NextClOrdIDCopy2"/>
            <member name="Split1"/>
            <member name="ReplaceThenCancel"/>
            <param name="gui:x" value="-503"/>
            <param name="gui:y" value="25"/>
            <param name="gui:width" value="659"/>
            <param name="gui:height" value="239"/>
        </gui.group>
    </add>
</modify>
